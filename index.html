<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SVG Mall Navigation</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; background:#f7f7f7; }
  header { background:#007BFF; color:white; padding:20px; text-align:center; }
  main { display:flex; flex-wrap: wrap; padding:20px; }
  #mapContainer { flex:2; min-width:400px; height:500px; border:2px solid #ccc; margin-right:20px; position:relative; background:#eaeaea; overflow:hidden; }
  svg { width:100%; height:100%; }
  .store { fill:#007BFF; cursor:pointer; }
  .facility { fill:orange; cursor:pointer; }
  .path { fill:none; stroke:#888; stroke-width:10; stroke-linecap:round; }
  #person { position:absolute; width:20px; height:20px; background:red; border-radius:50%; top:0; left:0; transform:translate(-10px,-10px); transition: top 0.5s linear, left 0.5s linear; z-index:100; }
  #controls { flex:1; min-width:250px; }
  h2 { color:#333; margin-top:0; }
  select, button { width:100%; padding:8px; margin:5px 0; font-size:16px; }
  table { width:100%; border-collapse:collapse; margin-top:10px; }
  th, td { border:1px solid #ccc; padding:5px; text-align:left; }
  th { background:#007BFF; color:white; }
</style>
</head>
<body>
<header>
  <h1>SVG Mall Navigation</h1>
</header>
<main>
  <div id="mapContainer">
    <svg id="mallMap">
      <!-- Floor 1 paths -->
      <path id="floor1Path" class="path" d="50,50 L50,200 L200,200 L200,50" />
      <!-- Stores -->
      <rect id="Grocery" class="store" x="40" y="40" width="40" height="40" data-store="Grocery" />
      <rect id="Clothing" class="store" x="200" y="40" width="40" height="40" data-store="Clothing" />
      <!-- Facilities -->
      <rect id="Escalator" class="facility" x="120" y="200" width="40" height="40" data-store="Escalator" />
    </svg>
    <div id="person"></div>
  </div>

  <div id="controls">
    <h2>Select Item</h2>
    <select id="itemSelect">
      <option value="">--Select Item--</option>
    </select>
    <button onclick="goToItem()">Go to Item</button>

    <h2>Item List & Rates</h2>
    <table id="itemsTable">
      <thead><tr><th>Item</th><th>Rate</th></tr></thead>
      <tbody><tr><td colspan="2">Select a store or item</td></tr></tbody>
    </table>
  </div>
</main>

<script>
// Store items
const storeItems = {
  "Grocery": [{name:"Rice",rate:"$50/kg"}, {name:"Milk",rate:"$1/litre"}],
  "Clothing": [{name:"Shirt",rate:"$20"}, {name:"Jacket",rate:"$60"}],
  "Escalator": []
};

// Map item -> store
let itemToStore = {};
for(let store in storeItems){
  storeItems[store].forEach(item=> itemToStore[item.name] = store);
}

// Populate item select
const itemSelect = document.getElementById('itemSelect');
for(let item in itemToStore){
  const option = document.createElement('option');
  option.value = item;
  option.textContent = item;
  itemSelect.appendChild(option);
}

// Show items in table
const itemsTableBody = document.querySelector('#itemsTable tbody');
function showItems(storeName){
  const items = storeItems[storeName] || [];
  if(items.length===0){
    itemsTableBody.innerHTML='<tr><td colspan="2">No items available</td></tr>';
  } else {
    itemsTableBody.innerHTML = items.map(i=>`<tr><td>${i.name}</td><td>${i.rate}</td></tr>`).join('');
  }
}

// Animate person along path (simple linear movement)
const person = document.getElementById('person');
function movePersonToStore(storeName){
  const target = document.querySelector('[data-store="'+storeName+'"]');
  if(!target) return;
  const mapRect = document.getElementById('mallMap').getBoundingClientRect();
  const targetRect = target.getBoundingClientRect();
  const top = targetRect.top - mapRect.top + targetRect.height/2;
  const left = targetRect.left - mapRect.left + targetRect.width/2;
  person.style.top = top + 'px';
  person.style.left = left + 'px';
  showItems(storeName);
}

// Go to selected item
function goToItem(){
  const item = itemSelect.value;
  if(!item) return alert("Select an item");
  const store = itemToStore[item];
  movePersonToStore(store);
}

// Click store to move person
document.querySelectorAll('.store, .facility').forEach(el=>{
  el.addEventListener('click', ()=> movePersonToStore(el.dataset.store));
});
</script>
</body>
</html>
